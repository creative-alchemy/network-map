<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src='https://api.mapbox.com/mapbox-gl-js/v1.11.1/mapbox-gl.js'></script>
        <link href='https://api.mapbox.com/mapbox-gl-js/v1.11.1/mapbox-gl.css' rel='stylesheet' />
        <link href="./styles.css" rel="stylesheet" />
        <!-- CSS only -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

        <!-- JS, Popper.js, and jQuery -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
        <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.min.js"></script>
        <link
          rel="stylesheet"
          href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.css"
          type="text/css"
        />
        <!-- Promise polyfill script required to use Mapbox GL Geocoder in IE 11 -->
        <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>
        <style>
          body {
            margin: 0px;
            padding: 0px;
          }
        </style>
    </head>
    <body>
      <div id="map" style="width: 100%; height: 100vh;"></div>
      <div id="map-title"><h1>P-12 Preparation Partnership Map</h1></div>
      <div id="geocoder" class="geocoder"></div>
      <div id="map-legend">
        <div id="map-legend__preparation-program">
          <div id="preparation-program__icon"></div><span>Preparation Program</span>
        </div>
        <div id="map-legend__school">
          <div id="school__icon"></div><span>School</span>
        </div>
      </div>
      <div id="filter-results-by">
        <div id="filter-results-by__title"><b>Filter results by</b></div>
        <form id="filter-form">
          <div>
            <div class="custom-control custom-checkbox">
              <input class="custom-control-input" id="prepared-to-teach-learning-network" onchange="updateFilters(this)" name="global:ptt-network" type="checkbox" value="Prepared To Teach Learning Network" autocomplete="off" checked>
              <label class="custom-control-label" for="prepared-to-teach-learning-network">Prepared To Teach Learning Network</label>
            </div>
          </div>
          <div>
            <div class="custom-control custom-checkbox">
              <input class="custom-control-input" id="locales-all" onchange="toggleAll(this)" name="locales:all" type="checkbox" value="locales:all" autocomplete="off" checked>
              <label class="custom-control-label" for="locales-all">
                <a class="collapse-toggle" data-toggle="collapse" href="#locales__collapse" aria-expanded="false" aria-controls="locales__collapse">
                  Locales
                  <svg width="0.8em" height="0.8em" viewBox="0 0 16 16" class="bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
                  </svg>
                </a>
              </label>
            </div>
            <div class="row">
              <div class="col">
                <div class="collapse multi-collapse sub-contents show" id="locales__collapse">
                  <div class="custom-control custom-checkbox">
                    <input class="custom-control-input" id="urban" onchange="updateFilters(this)" name="global:locale:urban" type="checkbox" value="Urban" autocomplete="off" checked>
                    <label class="custom-control-label" for="urban">Urban</label>
                  </div>
                  <div class="custom-control custom-checkbox">
                    <input class="custom-control-input" id="suburban" onchange="updateFilters(this)" name="global:locale:suburban" type="checkbox" value="suburban" autocomplete="off" checked>
                    <label class="custom-control-label" for="suburban">Suburban</label>
                  </div>
                  <div class="custom-control custom-checkbox">
                    <input class="custom-control-input" id="rural" onchange="updateFilters(this)" name="global:locale:rural" type="checkbox" value="Rural" autocomplete="off" checked>
                    <label class="custom-control-label" for="rural">Rural</label>
                  </div>
                  <div class="custom-control custom-checkbox">
                    <input class="custom-control-input" id="city" onchange="updateFilters(this)" name="global:locale:city" type="checkbox" value="City" autocomplete="off" checked>
                    <label class="custom-control-label" for="city">City</label>
                  </div>
                  <div class="custom-control custom-checkbox">
                    <input class="custom-control-input" id="town" onchange="updateFilters(this)" name="global:locale:town" type="checkbox" value="Town" autocomplete="off" checked>
                    <label class="custom-control-label" for="town">Town</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div>
            <div class="custom-control custom-checkbox">
              <input class="custom-control-input" id="states-all" onchange="toggleAll(this)" name="states:all" type="checkbox" value="states:all" autocomplete="off" checked>
              <label class="custom-control-label" for="states-all">
                <a class="collapse-toggle" data-toggle="collapse" href="#states__collapse" aria-expanded="false" aria-controls="states__collapse">
                  States
                  <svg width="0.8em" height="0.8em" viewBox="0 0 16 16" class="bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
                  </svg>
                </a>
              </label>
            </div>
            <div class="row">
              <div class="col">
                <div class="collapse multi-collapse sub-contents" id="states__collapse"></div>
              </div>
            </div>
          </div>
          <div>
            <div class="custom-control custom-checkbox">
              <input class="custom-control-input" id="preparation-programs-all" onchange="toggleAll(this)" name="preparation-programs:all" type="checkbox" value="preparation-programs:all" autocomplete="off" checked>
              <label class="custom-control-label" for="preparation-programs-all">
                <a class="collapse-toggle" data-toggle="collapse" href="#preparation-programs__collapse" aria-expanded="false" aria-controls="preparation-programs__collapse">
                  Preparation Programs
                  <svg width="0.8em" height="0.8em" viewBox="0 0 16 16" class="bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
                  </svg>
                </a>
              </label>
            </div>
            <div class="row">
              <div class="col">
                <div class="collapse multi-collapse sub-contents show" id="preparation-programs__collapse"></div>
              </div>
            </div>
          </div>
          <div>
            <div class="custom-control custom-checkbox">
              <input class="custom-control-input" id="schools-all" onchange="toggleAll(this)" name="schools:all" type="checkbox" value="schools:all" autocomplete="off" checked>
              <label class="custom-control-label" for="schools-all">
                <a class="collapse-toggle" data-toggle="collapse" href="#schools__collapse" aria-expanded="false" aria-controls="schools__collapse">
                  Schools
                  <svg width="0.8em" height="0.8em" viewBox="0 0 16 16" class="bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
                  </svg>
                </a>
              </label>
            </div>
            <div class="row">
              <div class="col">
                <div class="collapse multi-collapse sub-contents show" id="schools__collapse"></div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <script src="./init-map.js"></script>
      <script src="./populate-filters.js"></script>
      <script src="./update-filters.js"></script>
      <!-- <script src="csv-to-json.js"></script>
      <script src="initialize-map.js"></script>
      <script>
      // Fetch a csv
      fetch('schools.csv')
          .then(function(data) { return data.text() })
          .then(function(schoolCsv) {
              fetch('universities.csv')
                  .then(function(data) { return data.text() })
                  .then(function(universityCsv) {
                      var schoolJson = csvToJson(schoolCsv);
                      var universityJson = csvToJson(universityCsv);
                      console.log({ schoolJson, universityJson });
                      initializeMap(schoolJson, universityJson);
                  })
          });
      </script> -->
    </body>
</html>